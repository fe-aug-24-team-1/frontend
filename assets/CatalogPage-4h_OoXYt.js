import{u as z,a as P,r as f,j as e,c as q,I as N,b as M,d as D,P as I}from"./index-CnTS8N5O.js";import{B as R}from"./Breadcrumbs-Dh521AXL.js";import{p as k}from"./product-not-found-DKvgNh0f.js";const B="_icon_x1mui_191",O="_container_x1mui_286",U="_grid_x1mui_304",W="_catalogPage_x1mui_334",Q="_breadcrumbs_x1mui_358",T="_title_x1mui_362",G="_countModels_x1mui_378",V="_sortField_x1mui_392",H="_query_x1mui_405",J="_query__label_x1mui_423",K="_query__input_x1mui_428",X="_emptyImage_x1mui_450",Y="_wrapper_x1mui_454",Z="_cards_x1mui_476",ee="_pagination_x1mui_484",te="_noData_x1mui_488",se="_error_x1mui_496",ie="_error__text_x1mui_506",ne="_error__button_x1mui_513",n={"top-bar":"_top-bar_x1mui_164","top-bar_left":"_top-bar_left_x1mui_177","top-bar_right":"_top-bar_right_x1mui_183",icon:B,"icon--favourites":"_icon--favourites_x1mui_200","icon--favourites-isActive":"_icon--favourites-isActive_x1mui_206","icon--favourites_img":"_icon--favourites_img_x1mui_218","icon--favourites_img-count":"_icon--favourites_img-count_x1mui_221","icon--cart":"_icon--cart_x1mui_243","icon--cart-isActive":"_icon--cart-isActive_x1mui_248","icon--cart_img":"_icon--cart_img_x1mui_260","icon--cart_img-count":"_icon--cart_img-count_x1mui_263",container:O,grid:U,catalogPage:W,breadcrumbs:Q,title:T,countModels:G,sortField:V,"sortField--1":"_sortField--1_x1mui_396","sortField--2":"_sortField--2_x1mui_401",query:H,query__label:J,query__input:K,emptyImage:X,wrapper:Y,cards:Z,pagination:ee,noData:te,error:se,error__text:ie,error__button:ne},oe="_icon_czdq6_191",ae="_container_czdq6_286",ce="_grid_czdq6_304",re="_dropdown_czdq6_334",_e="_label_czdq6_338",le="_main_czdq6_343",ue="_main__text_czdq6_364",me="_main__icon_czdq6_369",de="_options_czdq6_380",pe="_option_czdq6_380",d={"top-bar":"_top-bar_czdq6_164","top-bar_left":"_top-bar_left_czdq6_177","top-bar_right":"_top-bar_right_czdq6_183",icon:oe,"icon--favourites":"_icon--favourites_czdq6_200","icon--favourites-isActive":"_icon--favourites-isActive_czdq6_206","icon--favourites_img":"_icon--favourites_img_czdq6_218","icon--favourites_img-count":"_icon--favourites_img-count_czdq6_221","icon--cart":"_icon--cart_czdq6_243","icon--cart-isActive":"_icon--cart-isActive_czdq6_248","icon--cart_img":"_icon--cart_img_czdq6_260","icon--cart_img-count":"_icon--cart_img-count_czdq6_263",container:ae,grid:ce,dropdown:re,label:_e,main:le,"main--active":"_main--active_czdq6_357",main__text:ue,main__icon:me,"main__icon--active":"_main__icon--active_czdq6_377",options:de,option:pe,"option--active":"_option--active_czdq6_401"};var $=(t=>(t.Age="Newest",t.Title="Alphabetically",t.Price="Cheapest",t))($||{});const w=({dropdownName:t})=>{const{t:a}=z(),[o,i]=P(),c=t==="sort"?["Newest","Alphabetically","Cheapest"]:["All",4,8,16],g=o.get("sort")||$.Age,p=o.get("perPage")||"All",[u,x]=f.useState(!1),v=(r,s)=>{const _=new URLSearchParams(o);s===c[0]?_.delete(r):_.set(r,`${s}`),i(_)};return e.jsxs("div",{className:d.dropdown,children:[e.jsx("p",{className:d.label,children:a(t==="sort"?"dropdownMenu.title":"itemsDropdown.title")}),e.jsxs("div",{tabIndex:0,className:q(d.main,{[d["main--active"]]:u}),onClick:()=>x(!u),onBlur:()=>x(!1),children:[e.jsx("div",{className:d.main__text,children:t==="sort"?g:p}),e.jsx("div",{className:q(d.main__icon,{[d["main__icon--active"]]:u})})]}),u&&e.jsx("div",{className:d.options,children:c.map(r=>e.jsx("div",{className:q(d.option,{[d["option--active"]]:p===r.toString()||g===r}),onMouseDown:()=>v(t,r),children:r},r))})]})};function j(t,a){const o=[];for(let i=t;i<=a;i+=1)o.push(i);return o}const he="_icon_1npey_191",ge="_container_1npey_286",xe="_grid_1npey_304",be="_pagination_1npey_334",ve="_arrow_1npey_340",fe="_numbers_1npey_364",ye="_number_1npey_364",h={"top-bar":"_top-bar_1npey_164","top-bar_left":"_top-bar_left_1npey_177","top-bar_right":"_top-bar_right_1npey_183",icon:he,"icon--favourites":"_icon--favourites_1npey_200","icon--favourites-isActive":"_icon--favourites-isActive_1npey_206","icon--favourites_img":"_icon--favourites_img_1npey_218","icon--favourites_img-count":"_icon--favourites_img-count_1npey_221","icon--cart":"_icon--cart_1npey_243","icon--cart-isActive":"_icon--cart-isActive_1npey_248","icon--cart_img":"_icon--cart_img_1npey_260","icon--cart_img-count":"_icon--cart_img-count_1npey_263",container:ge,grid:xe,pagination:be,arrow:ve,"arrow--left":"_arrow--left_1npey_361",numbers:fe,number:ye,"number--notEmpty":"_number--notEmpty_1npey_380","number--active":"_number--active_1npey_386"},je=({currentPage:t,visibleList:a,perPage:o,onPageChange:i})=>{const c=Math.ceil(a.length/o),[g,p]=f.useState(()=>window.innerWidth>639?"tablet":"mobile");f.useEffect(()=>{const s=()=>{window.innerWidth>639?p("tablet"):p("mobile")};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const u=()=>{t>1&&i(t-1)},x=()=>{t<Math.ceil(a.length/o)&&i(t+1)},r=(()=>{const s=[];return s.push(1),c<6?j(1,c):(g==="tablet"?t<6?(s.push(2,3,4,5,6,7),s.push("...")):t>c-5?(s.push("..."),j(c-6,c-1).map(_=>s.push(_))):(s.push("..."),j(t-2,t+2).map(_=>s.push(_)),s.push("...")):t<3?(s.push(2,3),s.push("...")):t>c-2?(s.push("..."),j(c-2,c-1).map(_=>s.push(_))):s.push("...",t,"..."),s.push(c),s)})();return e.jsxs("div",{className:h.pagination,children:[e.jsx("button",{className:`${h.arrow} ${h["arrow--left"]}`,onClick:u,disabled:t<=1,children:e.jsx(N.ChevronRight,{})}),e.jsx("ul",{className:h.numbers,children:r.map((s,_)=>e.jsx("li",{className:q(h.number,{[h["number--notEmpty"]]:s!=="...",[h["number--active"]]:t===s}),onClick:()=>s===+s&&i(s),children:s==="..."?e.jsx("span",{children:"..."}):s},_))}),e.jsx("button",{className:`${h.arrow} ${h["arrow--right"]}`,onClick:x,disabled:t>=Math.ceil(a.length/o),children:e.jsx(N.ChevronRight,{})})]})},qe=(t,a)=>{switch(a){case"Alphabetically":return[...t].sort((o,i)=>o.name.localeCompare(i.name));case"Cheapest":return[...t].sort((o,i)=>o.price-i.price);default:return[...t].sort((o,i)=>i.year-o.year)}},Pe=({category:t})=>{const{t:a}=z(),o=()=>{switch(t){case"phones":return"phonesPage";case"tablets":return"tabletsPage";case"accessories":return"accessoriesPage"}},[i,c]=P(),{products:g,loaded:p,error:u}=M(l=>l.products),x=i.get("sort")||"",v=i.get("perPage")||"",r=i.get("query")||"",[s,_]=f.useState(1),[b,C]=f.useState([]),A=D(),y=v?+v:b.length;f.useEffect(()=>{const l=qe(g,x).filter(m=>{const L=m.category===t,E=r?m.name.toLowerCase().includes(r.toLowerCase()):!0;return L&&E});C(l),_(1)},[t,v,x,g,r]);const F=l=>{const m=new URLSearchParams(i);l===1?m.delete("page"):m.set("page",l.toString()),_(l),c(m)},S=l=>{const m=new URLSearchParams(i);l.target.value?m.set("query",l.target.value):m.delete("query"),c(m)};return e.jsxs("div",{className:n.catalogPage,children:[e.jsx("div",{className:n.breadcrumbs,children:e.jsx(R,{})}),u&&!p&&e.jsxs("div",{className:n.error,children:[e.jsx("span",{className:n.error__text,children:"Something went wrong"}),e.jsx("button",{type:"button",className:n.error__button,onClick:()=>A("/home"),children:"Go to home page"})]}),!!g.length&&p&&!u&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:n.title,children:a(`${t}Page.title.text`)}),e.jsx("p",{className:n.countModels,children:a("phonesPage.title.count",{count:b.length})}),e.jsx("div",{className:`${n.sortField} ${n["sortField--1"]}`,children:e.jsx(w,{dropdownName:"sort"})}),e.jsx("div",{className:`${n.sortField} ${n["sortField--2"]}`,children:e.jsx(w,{dropdownName:"perPage"})}),e.jsxs("div",{className:n.query,children:[e.jsx("label",{htmlFor:"query",className:n.query__label,children:a("searchField.title")}),e.jsx("input",{id:"query",className:n.query__input,type:"text",value:r||"",onChange:S,placeholder:a("searchField.placeholder")})]}),b.length?e.jsx("ul",{className:n.cards,children:b.slice(s*y-y,s*y).map(l=>e.jsx("li",{className:n.card,children:e.jsx(I,{prod:l})},l.id))}):e.jsxs("div",{className:n.wrapper,children:[e.jsx("h1",{className:n.title,children:a(`${o()}.notFoundProduct.${t}`)}),e.jsx("img",{className:n.emptyImage,src:k,alt:"No favourites yet"})]}),y<b.length&&e.jsx("div",{className:n.pagination,children:e.jsx(je,{currentPage:s,visibleList:b,perPage:y,onPageChange:F})})]}),!b.length&&!p&&!u&&e.jsxs("h1",{className:n.noData,children:["There are no ",t," yet"]})]})};export{Pe as default};
